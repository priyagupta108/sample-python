name: Test Setup Python with Cache

on:
  push:
    branches:
      - issue-1021
 

jobs:
  Job-A:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code 🕵🏻‍♀️
        uses: actions/checkout@v4

      - uses: actions/setup-python@v4
        with:
          python-version: '3.10.10'
          cache: 'pip'
          cache-dependency-path: 'backend/requirements/linter-requirements.txt'

      - name: Run Mypy
        run: |
          pip install -r backend/requirements/linter-requirements.txt
          # mypy --config backend/mypy.ini backend
         


  Job-B:
    needs: Job-A
    runs-on: ubuntu-latest
    # services:
    #   postgresql:
    #     image: somerepo/someimage:latest
    #     ports:
    #       - 5432:5432
    #     env:
    #       SOME_VAR: SOMEVAR
    #     credentials:
    #       username: someuser
    #       password: somepass
    steps:
      - name: Check out repository code 🕵🏻‍♀️
        uses: actions/checkout@v4

      - uses: actions/setup-python@v4
        with:
          python-version: '3.10.10'
          cache: 'pip'
          cache-dependency-path: |
            backend/requirements/requirements.txt
            backend/requirements/dev-requirements.txt

      - name: Install newly added packages
        run: |
          pip install -r backend/requirements/requirements.txt
          # pip install -r backend/requirements/dev-requirements.txt
         